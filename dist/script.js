(()=>{"use strict";window.addEventListener("DOMContentLoaded",(()=>{!async function(){const e=await fetch("./towns.json"),t=await e.json(),o=document.querySelector(".list-search-wrapper"),r=document.querySelector(".list-search"),n=document.querySelector("#search"),a=document.querySelector(".static-map"),s=document.querySelector(".overlay"),l=document.querySelector(".overlay__close");t.features.sort(((e,t)=>e.name[0].toLowerCase()>t.name[0].toLowerCase()?1:-1)).forEach((e=>{r.innerHTML+=`\n            <li>\n                ${e.properties.hintContent}\n            </li>\n        `})),n.addEventListener("focus",(()=>{o.style.display="block"})),window.addEventListener("click",(e=>{console.log(e.target),e.target.classList.contains("list-search")||"search"===e.target.id||"LI"===e.target.tagName||(o.style.display="none"),(e.target.classList.contains("overlay_active")||"A"===e.target.tagName)&&s.classList.remove("overlay_active")})),n.addEventListener("input",(e=>{r.innerHTML="",""===e.target.value&&t.features.forEach((e=>{r.innerHTML+=`\n                    <li class="test">${e.properties.hintContent}</li>\n                `})),t.features.filter((t=>{for(let o=0;o<e.target.value.length;o++)return t.name.toLowerCase().includes(e.target.value)&&t.name.indexOf(e.target.value)<=e.target.value.length?t:null})).forEach((e=>{r.innerHTML+=`\n                    <li class="test">${e.properties.hintContent}</li>\n                `}))})),a.addEventListener("click",(()=>{s.classList.add("overlay_active"),ymaps.ready((function(){let e=new ymaps.Map("map",{center:[55.6233267145899,38.86243310321032],zoom:10}),o=new ymaps.ObjectManager;o.objects.options.set("preset","islands#blueDotIcon"),o.add(t.features),e.geoObjects.add(o),e.controls.remove("geolocationControl"),e.controls.remove(["searchControl"]),e.controls.remove("trafficControl"),e.controls.remove("typeSelector"),e.controls.remove("fullscreenControl"),e.controls.remove("zoomControl"),e.controls.remove("rulerControl"),e.controls.remove(["scrollZoom"])}))})),l.addEventListener("click",(()=>{s.classList.remove("overlay_active")}))}()}))})();